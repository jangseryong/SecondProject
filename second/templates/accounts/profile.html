{% extends 'base.html' %}

{% block title %} 프로필 {% endblock %}

{% block extra_css %}
<style>
    .container-profile {
        width: 30%;
        margin: 50px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #fff;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-profile">


    {% if request.user.id == profile_user.id %}
    <form method="post" action="{% url 'update' %}">
        {% csrf_token %}

        <h1 class="mb-4 text-center">{{ profile_user.name }}님 정보 페이지</h1>

        <div class="mb-3">
            <label for="username" class="form-label">아이디</label>
            <input type="text" class="form-control" id="username"
                   name="username" value="{{ profile_user.username }}" required readonly>
        </div>

        <div class="mb-3">
            <label for="name" class="form-label">이름</label>
            <input type="text" class="form-control" id="name"
                   name="name" value="{{ profile_user.name }}" required readonly>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">이메일</label>
            <input type="email" class="form-control" id="email"
                   name="email" value="{{ profile_user.email }}">
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">전화번호</label>
            <input type="text" class="form-control" id="phone"
                   name="phone" value="{{ profile_user.phone }}" required>
        </div>

        <div class="mb-3">
            <label for="password1" class="form-label">비밀번호 확인</label>
            <input type="password" class="form-control" id="password1" name="password1" required>
        </div>
        <div class="d-flex justify-content-between">

            <button type="submit" class="btn btn-danger">수정</button>
            <button type="button" class="btn btn-secondary" onclick="location.href='/'">취소</button>
        </div>
    </form>

    {% endif %}
    {% if user.is_staff %}
    <form method="post" action="{% url 'deactivate_user' profile_user.id %}">
        {% csrf_token %}
        <h1 class="mb-4 text-center">{{ profile_user.name }}님 정보 페이지</h1>

        <div class="mb-3">
            <label for="username" class="form-label">아이디</label>
            <input type="text" class="form-control" id="username"
                   name="username" value="{{ profile_user.username }}" required readonly>
        </div>

        <div class="mb-3">
            <label for="name" class="form-label">이름</label>
            <input type="text" class="form-control" id="name"
                   name="name" value="{{ profile_user.name }}" required readonly>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">이메일</label>
            <input type="email" class="form-control" id="email"
                   name="email" value="{{ profile_user.email }}">
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">전화번호</label>
            <input type="text" class="form-control" id="phone"
                   name="phone" value="{{ profile_user.phone }}" required>
        </div>
        <div class="d-flex justify-content-between">
            {% if profile_user.is_active %}
            <button type="submit" class="btn btn-danger">비활성화</button>
            {% else %}
            <button type="submit" class="btn btn-primary">활성화</button>
            {% endif %}
            <button type="button" class="btn btn-secondary" onclick="history.back()">목록</button>
        </div>
    </form>
    {% endif %}


</div>
{% endblock %}
